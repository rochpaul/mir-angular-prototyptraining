<div id="page" class="container">

  <div id="main_content">
    <h3>
      {{ 'messages.selfRegistration.step.create.title' | translate}}
    </h3>
    <p>
      {{ 'messages.selfRegistration.step.create.info' | translate }}
    </p>


    <form [formGroup]="registrationForm" (ngSubmit)="addPost(registrationForm.value)" class="userEditor form-horizontal"
          role="form"
          action="http://localhost:8291/mir/servlets/XEditor"
          method="post">
      <div xmlns:mcruser="http://www.mycore.de/components/mcruser" xmlns:xed="http://www.mycore.de/xeditor"
           class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">
            {{ 'messages.component.user2.admin.create.title' | translate}}

          </h3>
        </div>
        <div class="panel-body">


          <div xmlns:mir="http://www.mycore.de/mir" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
               class="alert alert-danger">
            <h3>
              Please fix the following validation errors in the marked fields:

            </h3>
            <ul class="mir-validation-messages">
              <div class="registrationAlert"
                   *ngIf="!registrationForm.controls['localuser_identification'].valid && registrationForm.controls['localuser_identification'].touched">
                <li>{{ 'messages.component.user2.admin.inputhints.username' | translate }}</li>
              </div>

              <div class="registrationAlert"
                   *ngIf="!registrationForm.controls['localuser_name'].valid && registrationForm.controls['localuser_name'].touched">
                <li>{{ 'messages.selfRegistration.realName.required' | translate}}</li>
              </div>

              <div class="registrationAlert"
                   *ngIf="!registrationForm.controls['localuser_mail'].valid && registrationForm.controls['localuser_mail'].touched">
                <li> {{ 'messages.component.user2.admin.email.syntax' | translate}}</li>
              </div>

              <div class="registrationAlert"
                   *ngIf="!registrationForm.controls['localuser_password'].valid && registrationForm.controls['localuser_password'].touched">
                <li> {{ 'messages.component.user2.admin.inputhints.password' | translate}}</li>
              </div>

              <div class="registrationAlert"
                   *ngIf="!registrationForm.controls['localuser_password_repeat'].valid && registrationForm.controls['localuser_password_repeat'].touched">
                <li> {{ 'messages.component.user2.admin.inputhints.password' | translate}}</li>
              </div>
            </ul>
          </div>


          <div class="form-group   required " [ngClass]="{
          'has-error has-feedback required':!registrationForm.controls['localuser_identification'].valid && registrationForm.controls['localuser_identification'].touched,
          'has-success required' : registrationForm.controls['localuser_identification'].valid}">

            <label class="col-md-3 control-label">
              {{ 'messages.component.user2.admin.userAccount' | translate}}

            </label>
            <div class="col-md-9 " [ngClass]="{
          'has-error has-feedback':!registrationForm.controls['localuser_identification'].valid && registrationForm.controls['localuser_identification'].touched,
          'has-success' : registrationForm.controls['localuser_identification'].valid}">

              <input class="form-control input-md " type="text" formControlName="localuser_identification"
                     maxlength="16" pattern="[a-z0-9\._-]*">
            </div>
          </div>

          <div class="form-group   required " [ngClass]="{
          'has-error has-feedback required':!registrationForm.controls['localuser_name'].valid && registrationForm.controls['localuser_name'].touched,
          'has-success required' : registrationForm.controls['localuser_name'].valid}">

            <label class="col-md-3 control-label">
              {{ 'messages.component.user2.admin.realName' | translate}}
            </label>

            <div class="col-md-9 " [ngClass]="{
          'has-error has-feedback':!registrationForm.controls['localuser_name'].valid && registrationForm.controls['localuser_name'].touched,
          'has-success' : registrationForm.controls['localuser_name'].valid}">

              <input class="form-control input-md" type="text" formControlName="localuser_name" maxlength="64"
                     placeholder="{{ 'messages.mir.register.realName' | translate}}">
            </div>
          </div>

          <div class="form-group   required " [ngClass]="{
          'has-error has-feedback required':!registrationForm.controls['localuser_mail'].valid && registrationForm.controls['localuser_mail'].touched,
          'has-success required' : registrationForm.controls['localuser_mail'].valid}">

            <label class="col-md-3 control-label">
              {{ 'messages.component.user2.admin.email' | translate}}
            </label>

            <div class="col-md-9 " [ngClass]="{
          'has-error has-feedback':!registrationForm.controls['localuser_mail'].valid && registrationForm.controls['localuser_mail'].touched,
          'has-success' : registrationForm.controls['localuser_mail'].valid}">

              <input class="form-control input-md" type="text" formControlName="localuser_mail" maxlength="64"
                     pattern="\S+@\S+\.\S+"
                     placeholder="your.mail@address.de">
            </div>
          </div>

          <div class="form-group   required " [ngClass]="{
          'has-error has-feedback required':!registrationForm.controls['localuser_password'].valid && registrationForm.controls['localuser_password'].touched,
          'has-success required' : registrationForm.controls['localuser_password'].valid}">

            <label class="col-md-3 control-label">
              {{ 'messages.component.user2.admin.password' | translate}}
            </label>

            <div class="col-md-9 " [ngClass]="{
          'has-error has-feedback':!registrationForm.controls['localuser_password'].valid && registrationForm.controls['localuser_password'].touched,
          'has-success' : registrationForm.controls['localuser_password'].valid}">

              <input class="form-control input-md" type="password" formControlName="localuser_password" matches="[\S]*">
            </div>
          </div>

          <div class="form-group   required " [ngClass]="{
          'has-error has-feedback required':!registrationForm.controls['localuser_password_repeat'].valid && registrationForm.controls['localuser_password_repeat'].touched,
          'has-success required' : registrationForm.controls['localuser_password_repeat'].valid}">

            <label class="col-md-3 control-label">
              {{ 'messages.component.user2.admin.passwordRepeat' | translate}}
            </label>

            <div class="col-md-9 " [ngClass]="{
          'has-error has-feedback':!registrationForm.controls['localuser_password_repeat'].valid && registrationForm.controls['localuser_password_repeat'].touched,
          'has-success' : registrationForm.controls['localuser_password_repeat'].valid}">

              <input class="form-control input-md" type="password" formControlName="localuser_password_repeat"
                     matches="[\S]*">
            </div>
          </div>

        </div>
        <div class="panel-footer clearfix">
          <div class="pull-right">
            <!--<input type="submit" class="button expanded" value="Submit Form" [disabled]="!rForm.valid">-->
            <button name="_xed_submit_servlet:MirSelfRegistrationServlet" class="btn btn-primary btn-md" type="submit"
                    [disabled]="!registrationForm.valid">
              {{ 'messages.component.user2.button.save' | translate }}

            </button>
            <button name="_xed_submit_cancel" class="btn btn-default btn-md" type="submit">
              {{ 'messages.component.user2.button.cancel' | translate }}

            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
